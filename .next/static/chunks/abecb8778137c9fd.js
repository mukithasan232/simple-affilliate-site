(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33792,e=>{e.v({actions:"admin-module__4WpgRW__actions",adminDashboard:"admin-module__4WpgRW__adminDashboard",adminHeader:"admin-module__4WpgRW__adminHeader",badge:"admin-module__4WpgRW__badge",deleteBtn:"admin-module__4WpgRW__deleteBtn",editForm:"admin-module__4WpgRW__editForm",formGrid:"admin-module__4WpgRW__formGrid",formGroup:"admin-module__4WpgRW__formGroup",headerActions:"admin-module__4WpgRW__headerActions",loginForm:"admin-module__4WpgRW__loginForm",loginInput:"admin-module__4WpgRW__loginInput",loginPage:"admin-module__4WpgRW__loginPage",modal:"admin-module__4WpgRW__modal",modalActions:"admin-module__4WpgRW__modalActions",modalOverlay:"admin-module__4WpgRW__modalOverlay",scrapeBox:"admin-module__4WpgRW__scrapeBox",statCard:"admin-module__4WpgRW__statCard",statValue:"admin-module__4WpgRW__statValue",stats:"admin-module__4WpgRW__stats",table:"admin-module__4WpgRW__table",tableImg:"admin-module__4WpgRW__tableImg",tableWrapper:"admin-module__4WpgRW__tableWrapper",titleCell:"admin-module__4WpgRW__titleCell"})},72906,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(33792);function s(){let[e,s]=(0,t.useState)(!1),[d,i]=(0,t.useState)(""),[r,n]=(0,t.useState)([]),[o,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(null),[_,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&g()},[e]);let g=async()=>{let e=await fetch("/api/products");n(await e.json())},j=async()=>{if(m){c(!0);try{let e=await fetch("/api/admin/scrape",{method:"POST",headers:{"Content-Type":"application/json","x-admin-secret":d},body:JSON.stringify({url:m})}),a=await e.json();if(a.error)throw Error(a.error);p(a),x(!0)}catch(e){alert(e.message)}finally{c(!1)}}},f=async e=>{e.preventDefault();try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json","x-admin-secret":d},body:JSON.stringify(h)})).ok&&(alert("Product saved successfully!"),x(!1),g())}catch(e){alert("Failed to save product")}},v=async e=>{if(confirm("Are you sure you want to delete this product?"))try{(await fetch(`/api/products?id=${e}`,{method:"DELETE",headers:{"x-admin-secret":d}})).ok?g():alert("Unauthorized or error")}catch(e){alert("Delete failed")}};return e?(0,a.jsxs)("div",{className:l.default.adminDashboard,children:[(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("header",{className:l.default.adminHeader,children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{children:["Admin ",(0,a.jsx)("span",{className:"text-gradient",children:"Dashboard"})]}),(0,a.jsx)("p",{children:"Manage your affiliate products and automation"})]}),(0,a.jsx)("div",{className:l.default.headerActions,children:(0,a.jsxs)("div",{className:l.default.scrapeBox,children:[(0,a.jsx)("input",{type:"text",placeholder:"Paste Amazon Link...",value:m,onChange:e=>u(e.target.value)}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:j,disabled:o,children:o?"Scraping...":"Smart Add"})]})})]}),(0,a.jsxs)("div",{className:l.default.stats,children:[(0,a.jsxs)("div",{className:l.default.statCard,children:[(0,a.jsx)("h3",{children:"Total Products"}),(0,a.jsx)("p",{className:l.default.statValue,children:r.length})]}),(0,a.jsxs)("div",{className:l.default.statCard,children:[(0,a.jsx)("h3",{children:"Featured"}),(0,a.jsx)("p",{className:l.default.statValue,children:r.filter(e=>e.featured).length})]}),(0,a.jsxs)("div",{className:l.default.statCard,children:[(0,a.jsx)("h3",{children:"Categories"}),(0,a.jsx)("p",{className:l.default.statValue,children:[...new Set(r.map(e=>e.category))].length})]})]}),(0,a.jsx)("div",{className:l.default.tableWrapper,children:(0,a.jsxs)("table",{className:l.default.table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Image"}),(0,a.jsx)("th",{children:"Title"}),(0,a.jsx)("th",{children:"Category"}),(0,a.jsx)("th",{children:"Price"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:r.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("img",{src:e.image,alt:"",className:l.default.tableImg})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:l.default.titleCell,children:e.title})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:l.default.badge,children:e.category})}),(0,a.jsx)("td",{children:(0,a.jsxs)("strong",{children:["$",e.price]})}),(0,a.jsx)("td",{className:l.default.actions,children:(0,a.jsx)("button",{className:l.default.deleteBtn,onClick:()=>v(e.id),children:"Delete"})})]},e.id))})]})})]}),_&&(0,a.jsx)("div",{className:l.default.modalOverlay,children:(0,a.jsxs)("div",{className:l.default.modal,children:[(0,a.jsxs)("h2",{children:["Confirm ",(0,a.jsx)("span",{className:"text-gradient",children:"Scraped Data"})]}),(0,a.jsxs)("form",{onSubmit:f,className:l.default.editForm,children:[(0,a.jsxs)("div",{className:l.default.formGrid,children:[(0,a.jsxs)("div",{className:l.default.formGroup,children:[(0,a.jsx)("label",{children:"Title"}),(0,a.jsx)("input",{type:"text",value:h?.title,onChange:e=>p({...h,title:e.target.value})})]}),(0,a.jsxs)("div",{className:l.default.formGroup,children:[(0,a.jsx)("label",{children:"Price ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:h?.price,onChange:e=>p({...h,price:parseFloat(e.target.value)})})]}),(0,a.jsxs)("div",{className:l.default.formGroup,children:[(0,a.jsx)("label",{children:"Category"}),(0,a.jsxs)("select",{value:h?.category,onChange:e=>p({...h,category:e.target.value}),children:[(0,a.jsx)("option",{value:"Laptops",children:"Laptops"}),(0,a.jsx)("option",{value:"Peripherals",children:"Peripherals"}),(0,a.jsx)("option",{value:"Audio",children:"Audio"}),(0,a.jsx)("option",{value:"Monitors",children:"Monitors"}),(0,a.jsx)("option",{value:"General",children:"General"})]})]}),(0,a.jsxs)("div",{className:l.default.formGroup,children:[(0,a.jsx)("label",{children:"Badge"}),(0,a.jsx)("input",{type:"text",value:h?.badge,onChange:e=>p({...h,badge:e.target.value}),placeholder:"e.g., Best Overall"})]})]}),(0,a.jsxs)("div",{className:l.default.modalActions,children:[(0,a.jsx)("button",{type:"button",className:"btn",onClick:()=>x(!1),children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Product To Live Site"})]})]})]})})]}):(0,a.jsx)("div",{className:l.default.loginPage,children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"admin123"===d?s(!0):alert("Invalid password")},className:l.default.loginForm,children:[(0,a.jsx)("h1",{children:"Admin Access"}),(0,a.jsx)("input",{type:"password",placeholder:"Enter password",value:d,onChange:e=>i(e.target.value),className:l.default.loginInput}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})}e.s(["default",()=>s])}]);