{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/tushar/Documents/02_Professional/Practice%20projects/simple%20affilliate%20site/src/app/api/products/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nconst productsPath = path.join(process.cwd(), \"src/data/products.json\");\n\nfunction getProducts() {\n    const data = fs.readFileSync(productsPath, \"utf8\");\n    return JSON.parse(data);\n}\n\nfunction saveProducts(products: any[]) {\n    fs.writeFileSync(productsPath, JSON.stringify(products, null, 4), \"utf8\");\n}\n\nexport async function GET() {\n    try {\n        const products = getProducts();\n        return NextResponse.json(products);\n    } catch (error) {\n        return NextResponse.json({ error: \"Failed to load products\" }, { status: 500 });\n    }\n}\n\nexport async function POST(req: Request) {\n    try {\n        const newProduct = await req.json();\n        const products = getProducts();\n\n        // Generate simple ID if not provided\n        if (!newProduct.id) {\n            newProduct.id = \"p\" + (products.length + 1);\n        }\n\n        // Generate slug from title if not provided\n        if (!newProduct.slug && newProduct.title) {\n            newProduct.slug = newProduct.title.toLowerCase().replace(/[^a-z0-9]+/g, \"-\");\n        }\n\n        products.push(newProduct);\n        saveProducts(products);\n\n        return NextResponse.json(newProduct);\n    } catch (error) {\n        return NextResponse.json({ error: \"Failed to add product\" }, { status: 500 });\n    }\n}\n\nexport async function DELETE(req: Request) {\n    const { searchParams } = new URL(req.url);\n    const id = searchParams.get(\"id\");\n\n    if (!id) return NextResponse.json({ error: \"ID required\" }, { status: 400 });\n\n    try {\n        let products = getProducts();\n        products = products.filter((p: any) => p.id !== id);\n        saveProducts(products);\n        return NextResponse.json({ success: true });\n    } catch (error) {\n        return NextResponse.json({ error: \"Failed to delete\" }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAE9C,SAAS;IACL,MAAM,OAAO,wGAAE,CAAC,YAAY,CAAC,cAAc;IAC3C,OAAO,KAAK,KAAK,CAAC;AACtB;AAEA,SAAS,aAAa,QAAe;IACjC,wGAAE,CAAC,aAAa,CAAC,cAAc,KAAK,SAAS,CAAC,UAAU,MAAM,IAAI;AACtE;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,WAAW;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACJ;AAEO,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,aAAa,MAAM,IAAI,IAAI;QACjC,MAAM,WAAW;QAEjB,qCAAqC;QACrC,IAAI,CAAC,WAAW,EAAE,EAAE;YAChB,WAAW,EAAE,GAAG,MAAM,CAAC,SAAS,MAAM,GAAG,CAAC;QAC9C;QAEA,2CAA2C;QAC3C,IAAI,CAAC,WAAW,IAAI,IAAI,WAAW,KAAK,EAAE;YACtC,WAAW,IAAI,GAAG,WAAW,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,eAAe;QAC5E;QAEA,SAAS,IAAI,CAAC;QACd,aAAa;QAEb,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ;AAEO,eAAe,OAAO,GAAY;IACrC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,KAAK,aAAa,GAAG,CAAC;IAE5B,IAAI,CAAC,IAAI,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAc,GAAG;QAAE,QAAQ;IAAI;IAE1E,IAAI;QACA,IAAI,WAAW;QACf,WAAW,SAAS,MAAM,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;QAChD,aAAa;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC7C,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IAC1E;AACJ"}}]
}